<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HR Document Hub</title>
<style>
body { font-family: Arial; background: #f4f6f8; margin:0; padding:0; }
header { background: #2c3e50; color:white; text-align:center; padding:15px; font-size:24px; }
.container { max-width:900px; margin:20px auto; background:white; padding:20px; border-radius:8px; box-shadow:0 0 8px rgba(0,0,0,0.1); }
#searchBox { width:100%; padding:10px; font-size:16px; margin-bottom:15px; border-radius:6px; border:1px solid #ccc; }
.folder { font-weight:bold; font-size:18px; margin-top:15px; color:#34495e; }
ul { list-style:none; padding-left:20px; }
li { margin:6px 0; padding:6px; border-radius:4px; transition:0.2s; }
li:hover { background:#ecf0f1; }
a { text-decoration:none; color:#2c3e50; }
a:hover { text-decoration:underline; color:#1abc9c; }
.icon { margin-right:8px; }
</style>
</head>
<body>
<header>📂 HR Document Hub</header>
<div class="container">
<input type="text" id="searchBox" placeholder="Search documents..." onkeyup="searchFiles()">
<div id="fileList">Loading files...</div>
</div>

<script>
const repoOwner = "tomalhr"; // CHANGE THIS
const repoName = "hrhub"; // CHANGE THIS
const branch = "main";

const fileIcons = { 'pdf':'📄','doc':'📝','docx':'📝','xls':'📊','xlsx':'📊','ppt':'📽️','pptx':'📽️','jpg':'🖼️','jpeg':'🖼️','png':'🖼️','gif':'🖼️','default':'📁' };

let allFiles = [];

async function fetchFolder(path="") {
    const url = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${path}?ref=${branch}`;
    const res = await fetch(url);
    return await res.json();
}

async function loadFiles() {
    const items = await fetchFolder("");
    allFiles = [];

    for(const folder of items.filter(i=>i.type==='dir')) {
        const files = await fetchFolder(folder.path);
        allFiles.push({ folder: folder.name, files });
    }
    displayFiles();
}

function displayFiles(filter="") {
    const container = document.getElementById("fileList");
    container.innerHTML = "";
    allFiles.forEach(f=>{
        const filtered = f.files.filter(file => file.name.toLowerCase().includes(filter.toLowerCase()));
        if(filtered.length>0){
            const folderDiv = document.createElement("div");
            folderDiv.classList.add("folder");
            folderDiv.textContent = `📁 ${f.folder}`;
            container.appendChild(folderDiv);
            const ul = document.createElement("ul");
            filtered.forEach(file=>{
                const ext = file.name.split('.').pop().toLowerCase();
                const icon = fileIcons[ext]||fileIcons.default;
                const li = document.createElement("li");
                li.innerHTML = `<span class="icon">${icon}</span> <a href="${file.download_url}" target="_blank">${file.name}</a>`;
                ul.appendChild(li);
            });
            container.appendChild(ul);
        }
    });
}

function searchFiles() {
    const query = document.getElementById("searchBox").value;
    displayFiles(query);
}

loadFiles();
</script>
</body>
</html>
