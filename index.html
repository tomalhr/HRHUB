<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HR Document Hub</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    margin:0; padding:0;
}
header {
    background: #2c3e50;
    color:white;
    text-align:center;
    padding:15px;
    font-size:24px;
    font-weight:bold;
}
.container {
    max-width: 900px;
    margin: 20px auto;
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
}
#searchBox {
    width: 100%;
    padding: 10px;
    font-size: 16px;
    margin-bottom: 10px;
    border-radius: 6px;
    border: 1px solid #ccc;
}
.button-bar {
    margin-bottom: 15px;
}
button {
    padding: 8px 12px;
    margin-right: 8px;
    border: none;
    border-radius: 5px;
    background: #3498db;
    color: white;
    cursor: pointer;
}
button:hover { background: #1abc9c; }

/* Folder Styles */
.folder {
    margin: 5px 0;
    cursor: pointer;
    font-weight: bold;
    color: #34495e;
}
.folder:hover { color:#1abc9c; }
ul {
    list-style: none;
    padding-left: 20px;
    display: none;
}
li {
    margin: 4px 0;
}
a { text-decoration:none; color:#2c3e50; }
a:hover { text-decoration: underline; color:#1abc9c; }
.icon { margin-right:8px; }
</style>
</head>
<body>

<header>📂 HR Document Hub</header>
<div class="container">
<input type="text" id="searchBox" placeholder="Search documents..." onkeyup="searchFiles()">
<div class="button-bar">
<button onclick="expandAll()">Expand All</button>
<button onclick="collapseAll()">Collapse All</button>
</div>
<div id="fileList">Loading files...</div>
</div>

<script>
const repoOwner = "tomalhr"; // CHANGE THIS
const repoName = "hrhub"; // CHANGE THIS
const branch = "main";

const fileIcons = { 
    'pdf':'📄','doc':'📝','docx':'📝','xls':'📊','xlsx':'📊',
    'ppt':'📽️','pptx':'📽️','jpg':'🖼️','jpeg':'🖼️','png':'🖼️','gif':'🖼️',
    'default':'📁' 
};

// Recursive folder building
async function fetchFolder(path="") {
    const url = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${path}?ref=${branch}`;
    const res = await fetch(url);
    return await res.json();
}

async function buildFolder(path="", parentElement=null) {
    const items = await fetchFolder(path);

    const ul = document.createElement('ul');
    if(parentElement) parentElement.appendChild(ul);
    else document.getElementById('fileList').appendChild(ul);

    for(const item of items) {
        const li = document.createElement('li');

        if(item.type === 'dir') {
            li.innerHTML = `📁 <span class="folder">${item.name}</span>`;
            ul.appendChild(li);

            const clickSpan = li.querySelector('.folder');
            clickSpan.addEventListener('click', function(){
                const nextUl = li.querySelector('ul');
                if(nextUl) nextUl.style.display = nextUl.style.display==='none'?'block':'none';
            });

            await buildFolder(item.path, li); // recursive
        } else if(item.type === 'file') {
            const ext = item.name.split('.').pop().toLowerCase();
            const icon = fileIcons[ext] || fileIcons['default'];
            li.innerHTML = `<span class="icon">${icon}</span> <a href="${item.download_url}" target="_blank">${item.name}</a>`;
            ul.appendChild(li);
        }
    }
}

// Expand/Collapse all functions
function expandAll() {
    document.querySelectorAll('#fileList ul').forEach(ul => ul.style.display='block');
}

function collapseAll() {
    document.querySelectorAll('#fileList ul').forEach(ul => ul.style.display='none');
}

// Search function
function searchFiles() {
    const filter = document.getElementById('searchBox').value.toLowerCase();
    document.querySelectorAll('#fileList li').forEach(li=>{
        const text = li.textContent.toLowerCase();
        li.style.display = text.includes(filter)?'list-item':'none';
    });
}

// Initialize
(async function init(){
    document.getElementById('fileList').innerHTML = "";
    await buildFolder("");
})();
</script>

</body>
</html>
